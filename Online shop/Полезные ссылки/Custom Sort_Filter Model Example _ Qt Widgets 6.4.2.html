
<!-- saved from url=(0077)https://doc.qt.io/qt-6/qtwidgets-itemviews-customsortfiltermodel-example.html -->
<html lang="en" data-theme="light"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Custom Sort/Filter Model Example | Qt Widgets 6.4.2</title>
  <link rel="stylesheet" type="text/css" href="./Custom Sort_Filter Model Example _ Qt Widgets 6.4.2_files/online2.css">
  <link rel="stylesheet" href="./Custom Sort_Filter Model Example _ Qt Widgets 6.4.2_files/qt-design-system-1.1.0.css">
  <link rel="stylesheet" type="text/css" href="./Custom Sort_Filter Model Example _ Qt Widgets 6.4.2_files/font-awesome.min.css">
  <link href="./Custom Sort_Filter Model Example _ Qt Widgets 6.4.2_files/htmltabs.css" rel="stylesheet" type="text/css">
  <link rel="shortcut icon" href="https://d33sqmjvzgs8hq.cloudfront.net/wp-content/themes/oneqt/assets/images/favicon.ico.gzip">
  <link rel="icon" type="image/png" href="https://d33sqmjvzgs8hq.cloudfront.net/wp-content/themes/oneqt/assets/images/favicon-32x32.png">
  <link rel="icon" type="image/png" href="https://d33sqmjvzgs8hq.cloudfront.net/wp-content/themes/oneqt/assets/images/favicon-16x16.png">
  <script type="text/javascript" async="" src="./Custom Sort_Filter Model Example _ Qt Widgets 6.4.2_files/js"></script><script type="text/javascript" async="" src="./Custom Sort_Filter Model Example _ Qt Widgets 6.4.2_files/js(1)"></script><script async="" src="./Custom Sort_Filter Model Example _ Qt Widgets 6.4.2_files/gtm.js"></script><script type="text/javascript" src="./Custom Sort_Filter Model Example _ Qt Widgets 6.4.2_files/jquery.js.gzip"></script>
  <script type="text/javascript" src="./Custom Sort_Filter Model Example _ Qt Widgets 6.4.2_files/jquery-migrate.min.js.gzip"></script>
  <script type="text/javascript" src="./Custom Sort_Filter Model Example _ Qt Widgets 6.4.2_files/combo.js.gzip"></script>
  <script type="text/javascript" src="./Custom Sort_Filter Model Example _ Qt Widgets 6.4.2_files/qtds-extras.js"></script>
  <script type="text/javascript"> wpThemeFolder = 'https://qt.io/wp-content/themes/oneqt'; </script>
  <script type="text/javascript">
 $(document).ready(function(){
   $("input[type=radio]").on("click", function() {
   var lbl = $(this).next().text();
   $("input[type=radio]:not(checked)").filter(function() {
     if ($(this).next().text() == lbl)
         $(this).prop("checked", true);
   });
   });
 });
  </script>
  <script type="text/javascript">
    $(function () {
      if (document.documentElement.getAttribute('data-theme') === 'dark')
        $('input#th-toggle').prop('checked', true);
      $('input#th-toggle').change(function() {
        var theme = this.checked ? 'dark' : 'light';
        localStorage.setItem('theme', theme);
        document.documentElement.setAttribute('data-theme', theme);
      });
    });
  </script>
  <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-5QQXBTC');</script>
<!-- End Google Tag Manager -->
  <script type="text/javascript" src="./Custom Sort_Filter Model Example _ Qt Widgets 6.4.2_files/qt-design-system-1.1.0-doc.js"></script>
  <script src="./Custom Sort_Filter Model Example _ Qt Widgets 6.4.2_files/prettify.js" type="text/javascript"></script>
</head>
<body class="qt-design-system js-ds-scroll-middle js-ds-scroll-up" style="background:var(--content-bg-color)" onload="prettyPrint()">
<div class="header" id="header">
<div class="b-header__replacer" style="height:121px;"></div><header class="b-header b-header--float" data-float="true">
    <div class="b-header__container">

        <div class="b-header__secondary-level">
            <div class="b-header__secondary-level__back">
                <a class="c-link c-link--left" href="https://www.qt.io/">Back to Qt.io</a>
            </div>
            <div class="b-header__secondary-level__right">
                <a href="https://www.qt.io/contact-us/" target="_blank">Contact Us</a>
                <a href="https://blog.qt.io/" target="_blank">Blog</a>
                <a href="https://www.qt.io/download/" target="_blank" class="c-button c-button--small">Download Qt</a>
            </div>
        </div>

        <div class="b-header__primary-level">
            <div class="b-header__primary-level__left">
                <a class="b-header__logo" href="https://doc.qt.io/">
                    <img src="./Custom Sort_Filter Model Example _ Qt Widgets 6.4.2_files/qt-logo-documentation.svg" alt="Qt documentation">
                </a>
            </div>
            <div class="b-header__primary-level__navigation">
            <ul class="c-navigation-header">
                <li role="menu" style="margin: 0 5px 5px 0;top:7px">
                  <div title="Toggle light/dark theme" class="theme-switch-wrapper">
                    <label class="theme-switch" for="th-toggle">
                        <input type="checkbox" id="th-toggle">
                        <div class="theme-icon"></div>
                    </label>
                  </div>
                </li>
                <li role="menu">
                    <a href="https://doc.qt.io/archives" aria-haspopup="true" aria-expanded="false">Archives</a>
                </li>
                <li role="menu">
                    <a href="https://doc-snapshots.qt.io/" aria-haspopup="true" aria-expanded="false">Snapshots</a>
                </li>
            </ul>
            </div>
            <div class="b-header__primary-level__hamburger">
                <div class="c-hamburger"></div>
            </div>
        </div>
    </div>
</header>
</div>
<div data-global-resource-path="qt-design-system/components/b-sidebar.html">
    <div class="b-sidebar b-sidebar--full-width">
        <aside class="b-sidebar__sidebar">
            <div class="b-sidebar__sidebar__mobile-close"><div class="c-mobile-close"></div></div>
            <div class="b-sidebar__sidebar__mobile-toggle" data-mobile-title="Topics"></div>
                        <div class="b-sidebar__sidebar__content">
                <div data-margin-bottom="md">
                                        <select id="qds-vdropdown" class="c-form-select c-form-select--dark js-versioncontrol" style="visibility: visible;">
                                            <option value="/qt-6/" selected="">Qt 6.4</option><option value="/qt-6.2/">Qt 6.2 LTS</option><option value="/qt-5/">Qt 5.15 LTS</option></select>
                                    </div>
                <div id="qds-ec-toggle" title="Expand/collapse all" style="display: block;"></div>
                <nav>
                    <ul class="c-sidebar-navigation">
                                                <li class="sidebar-nav-topic c-sidebar-navigation--parent" id="sb-topic-0" style="visibility: visible;">
 <a>
  Reference
 </a>
 <ul>
  <li>
   <a href="https://doc.qt.io/qt-6/classes.html">
    All Qt C++ Classes
   </a>
  </li>
  <li>
   <a href="https://doc.qt.io/qt-6/qmltypes.html">
    All QML Types
   </a>
  </li>
  <li>
   <a href="https://doc.qt.io/qt-6/qtmodules.html">
    All Qt Modules
   </a>
  </li>
  <li>
   <a href="https://doc.qt.io/qt-6/reference-overview.html">
    All Qt Reference Pages
   </a>
  </li>
 </ul>
</li>
                        <li class="sidebar-nav-topic c-sidebar-navigation--parent" id="sb-topic-1" style="visibility: visible;">
 <a>
  Getting Started
 </a>
 <ul>
  <li>
   <a href="https://doc.qt.io/qt-6/qt-intro.html">
    Introduction to Qt
   </a>
  </li>
  <li>
   <a href="https://doc.qt.io/qt-6/gettingstarted.html">
    Getting Started
   </a>
  </li>
  <li>
   <a href="https://doc.qt.io/qt-6/qtexamplesandtutorials.html">
    Examples and Tutorials
   </a>
  </li>
  <li>
   <a href="https://doc.qt.io/qt-6/supported-platforms.html">
    Supported Platforms
   </a>
  </li>
  <li>
   <a href="https://doc.qt.io/qt-6/whatsnewqt6.html">
    What's new in Qt 6
   </a>
  </li>
  <li>
   <a href="https://doc.qt.io/qt-6/licensing.html">
    Qt Licensing
   </a>
  </li>
 </ul>
</li>
                        <li class="sidebar-nav-topic c-sidebar-navigation--parent" id="sb-topic-2" style="visibility: visible;">
 <a>
  Overviews
 </a>
 <ul>
  <li>
   <a href="https://doc.qt.io/qt-6/topics-app-development.html">
    Development Tools
   </a>
  </li>
  <li>
   <a href="https://doc.qt.io/qt-6/topics-ui.html">
    User Interfaces
   </a>
  </li>
  <li>
   <a href="https://doc.qt.io/qt-6/topics-core.html">
    Core Internals
   </a>
  </li>
  <li>
   <a href="https://doc.qt.io/qt-6/topics-data-storage.html">
    Data Storage
   </a>
  </li>
  <li>
   <a href="https://doc.qt.io/qt-6/topics-network-connectivity.html">
    Networking and Connectivity
   </a>
  </li>
  <li>
   <a href="https://doc.qt.io/qt-6/topics-graphics.html">
    Graphics
   </a>
  </li>
  <li>
   <a href="https://doc.qt.io/qt-6/mobiledevelopment.html">
    Mobile Development
   </a>
  </li>
  <li>
   <a href="https://doc.qt.io/qt-6/qmlapplications.html">
    QML Applications
   </a>
  </li>
  <li>
   <a href="https://doc.qt.io/qt-6/platform-integration.html">
    Platform Integration
   </a>
  </li>
  <li>
   <a href="https://doc.qt.io/qt-6/overviews-main.html">
    All Qt Overviews
   </a>
  </li>
 </ul>
</li>
                    </ul>
                </nav>
            </div>
        </aside>
        <div class="b-sidebar__content">
            <div class="b-sidebar__topbar" data-margin-bottom="sm">
                <div class="b-topbar">
                    <div class="b-topbar__search">
                        <form id="site-search" role="search" style="width: 535px; max-width: 100%" autocomplete="off">
                            <input class="c-form-input-field c-form-input-field--search" placeholder="Search" id="search" name="search" onclick="(function(w,d,i){i.removeAttribute(&#39;on&#39;+w.event.type);var j=d.createElement(&#39;script&#39;),c=d.createElement(&#39;link&#39;);j.async=true;j.onload=function(){qtSearchInit(i,w.qtSearchNavigation)};j.src=&#39;//www.qt.io/hubfs/qt-design-system/qt-search-component/qt-search-component.js&#39;;c.rel=&#39;stylesheet&#39;;c.onload=function(){try{w.qtscs=1;qtSearchStyle(i)}catch(e){}};c.href=&#39;//www.qt.io/hubfs/qt-design-system/qt-search-component/qt-search-component.css&#39;;d.head.appendChild(c);d.head.appendChild(j)})(window,document,this)" required="" type="text">
                            <button type="submit" style="display:none;">Search</button>
                            <style>.js-qt-search-component{z-index:1000;}</style>
                        </form>
                    </div>
                    <div class="b-topbar__breadcrump">
                        <ul class="c-breadcrump">
                            <li><a href="https://doc.qt.io/qt-6/index.html">Qt 6.4</a></li>
                            <li><a href="https://doc.qt.io/qt-6/qtwidgets-index.html">Qt Widgets</a></li>
                            <li><a href="https://doc.qt.io/qt-6/examples-itemviews.html">Item Views Examples</a></li>
                            <li><a>Custom Sort/Filter Model Example</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="b-sidebar__content__wrapper">
                <article class="b-sidebar__content__left">
                    <div class="context mainContent" style="margin: 0;padding: 0; background: 0;">
                    

<div class="context">
<h1 class="title">Custom Sort/Filter Model Example</h1>
<!-- $$$itemviews/customsortfiltermodel-brief -->
<p>The Custom Sort/Filter Model example illustrates how to subclass <a href="https://doc.qt.io/qt-6/qsortfilterproxymodel.html">QSortFilterProxyModel</a> to perform advanced sorting and filtering.</p>
<!-- @@@itemviews/customsortfiltermodel -->
<!-- $$$itemviews/customsortfiltermodel-description -->
<div class="descr" id="details">
<p class="centerAlign"><img alt="Screenshot of the Custom Sort/Filter Model Example" src="./Custom Sort_Filter Model Example _ Qt Widgets 6.4.2_files/customsortfiltermodel-example.png"></p><p>The <a href="https://doc.qt.io/qt-6/qsortfilterproxymodel.html">QSortFilterProxyModel</a> class provides support for sorting and filtering data passed between another model and a view.</p>
<p>The model transforms the structure of a source model by mapping the model indexes it supplies to new indexes, corresponding to different locations, for views to use. This approach allows a given source model to be restructured as far as views are concerned, without requiring any transformations on the underlying data and without duplicating the data in memory.</p>
<p>The Custom Sort/Filter Model example consists of two classes:</p>
<ul>
<li>The <code>MySortFilterProxyModel</code> class provides a custom proxy model.</li>
<li>The <code>Window</code> class provides the main application window, using the custom proxy model to sort and filter a standard item model.</li>
</ul>
<p>We will first take a look at the <code>MySortFilterProxyModel</code> class to see how the custom proxy model is implemented, then we will take a look at the <code>Window</code> class to see how the model is used. Finally we will take a quick look at the <code>main()</code> function.</p>
<h4 id="mysortfilterproxymodel-class-definition">MySortFilterProxyModel Class Definition<a class="plink" href="https://doc.qt.io/qt-6/qtwidgets-itemviews-customsortfiltermodel-example.html#mysortfilterproxymodel-class-definition" title="Direct link to this headline"></a></h4>
<p>The <code>MySortFilterProxyModel</code> class inherits the <a href="https://doc.qt.io/qt-6/qsortfilterproxymodel.html">QSortFilterProxyModel</a> class.</p>
<p>Since <a href="https://doc.qt.io/qt-6/qabstractproxymodel.html">QAbstractProxyModel</a> and its subclasses are derived from <a href="https://doc.qt.io/qt-6/qabstractitemmodel.html">QAbstractItemModel</a>, much of the same advice about subclassing normal models also applies to proxy models.</p>
<p>On the other hand, it is worth noting that many of <a href="https://doc.qt.io/qt-6/qsortfilterproxymodel.html">QSortFilterProxyModel</a>'s default implementations of functions are written so that they call the equivalent functions in the relevant source model. This simple proxying mechanism may need to be overridden for source models with more complex behavior. In this example we derive from the <a href="https://doc.qt.io/qt-6/qsortfilterproxymodel.html">QSortFilterProxyModel</a> class to ensure that our filter can recognize a valid range of dates, and to control the sorting behavior.</p>
<div class="pre"><pre class="cpp prettyprint prettyprinted" style=""><span class="wrap" title="Toggle line wrap" style="display: none;"></span><span class="keyword"><span class="kwd">class</span></span><span class="pln"> </span><span class="typ">MySortFilterProxyModel</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="keyword"><span class="kwd">public</span></span><span class="pln"> </span><span class="type"><a href="https://doc.qt.io/qt-6/qsortfilterproxymodel.html"><span class="typ">QSortFilterProxyModel</span></a></span><span class="pln">
</span><span class="pun">{</span><span class="pln">
    Q_OBJECT

</span><span class="keyword"><span class="kwd">public</span></span><span class="pun">:</span><span class="pln">
    </span><span class="typ">MySortFilterProxyModel</span><span class="pun">(</span><span class="type"><a href="https://doc.qt.io/qt-6/qobject.html"><span class="typ">QObject</span></a></span><span class="pln"> </span><span class="operator"><span class="pun">*</span></span><span class="pln">parent </span><span class="operator"><span class="pun">=</span></span><span class="pln"> </span><span class="kwd">nullptr</span><span class="pun">);</span><span class="pln">

    </span><span class="type"><a href="https://doc.qt.io/qt-6/qdate.html"><span class="typ">QDate</span></a></span><span class="pln"> filterMinimumDate</span><span class="pun">()</span><span class="pln"> </span><span class="keyword"><span class="kwd">const</span></span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="keyword"><span class="kwd">return</span></span><span class="pln"> minDate</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
    </span><span class="type"><span class="kwd">void</span></span><span class="pln"> setFilterMinimumDate</span><span class="pun">(</span><span class="type"><a href="https://doc.qt.io/qt-6/qdate.html"><span class="typ">QDate</span></a></span><span class="pln"> date</span><span class="pun">);</span><span class="pln">

    </span><span class="type"><a href="https://doc.qt.io/qt-6/qdate.html"><span class="typ">QDate</span></a></span><span class="pln"> filterMaximumDate</span><span class="pun">()</span><span class="pln"> </span><span class="keyword"><span class="kwd">const</span></span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="keyword"><span class="kwd">return</span></span><span class="pln"> maxDate</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
    </span><span class="type"><span class="kwd">void</span></span><span class="pln"> setFilterMaximumDate</span><span class="pun">(</span><span class="type"><a href="https://doc.qt.io/qt-6/qdate.html"><span class="typ">QDate</span></a></span><span class="pln"> date</span><span class="pun">);</span><span class="pln">

</span><span class="keyword"><span class="kwd">protected</span></span><span class="pun">:</span><span class="pln">
    </span><span class="type"><span class="kwd">bool</span></span><span class="pln"> filterAcceptsRow</span><span class="pun">(</span><span class="type"><span class="kwd">int</span></span><span class="pln"> sourceRow</span><span class="operator"><span class="pun">,</span></span><span class="pln"> </span><span class="keyword"><span class="kwd">const</span></span><span class="pln"> </span><span class="type"><a href="https://doc.qt.io/qt-6/qmodelindex.html"><span class="typ">QModelIndex</span></a></span><span class="pln"> </span><span class="operator"><span class="pun">&amp;</span></span><span class="pln">sourceParent</span><span class="pun">)</span><span class="pln"> </span><span class="keyword"><span class="kwd">const</span></span><span class="pln"> </span><span class="kwd">override</span><span class="pun">;</span><span class="pln">
    </span><span class="type"><span class="kwd">bool</span></span><span class="pln"> lessThan</span><span class="pun">(</span><span class="keyword"><span class="kwd">const</span></span><span class="pln"> </span><span class="type"><a href="https://doc.qt.io/qt-6/qmodelindex.html"><span class="typ">QModelIndex</span></a></span><span class="pln"> </span><span class="operator"><span class="pun">&amp;</span></span><span class="pln">left</span><span class="operator"><span class="pun">,</span></span><span class="pln"> </span><span class="keyword"><span class="kwd">const</span></span><span class="pln"> </span><span class="type"><a href="https://doc.qt.io/qt-6/qmodelindex.html"><span class="typ">QModelIndex</span></a></span><span class="pln"> </span><span class="operator"><span class="pun">&amp;</span></span><span class="pln">right</span><span class="pun">)</span><span class="pln"> </span><span class="keyword"><span class="kwd">const</span></span><span class="pln"> </span><span class="kwd">override</span><span class="pun">;</span><span class="pln">

</span><span class="keyword"><span class="kwd">private</span></span><span class="pun">:</span><span class="pln">
    </span><span class="type"><span class="kwd">bool</span></span><span class="pln"> dateInRange</span><span class="pun">(</span><span class="type"><a href="https://doc.qt.io/qt-6/qdate.html"><span class="typ">QDate</span></a></span><span class="pln"> date</span><span class="pun">)</span><span class="pln"> </span><span class="keyword"><span class="kwd">const</span></span><span class="pun">;</span><span class="pln">

    </span><span class="type"><a href="https://doc.qt.io/qt-6/qdate.html"><span class="typ">QDate</span></a></span><span class="pln"> minDate</span><span class="pun">;</span><span class="pln">
    </span><span class="type"><a href="https://doc.qt.io/qt-6/qdate.html"><span class="typ">QDate</span></a></span><span class="pln"> maxDate</span><span class="pun">;</span><span class="pln">
</span><span class="pun">};</span></pre></div>
<p>We want to be able to filter our data by specifying a given period of time. For that reason, we implement the custom <code>setFilterMinimumDate()</code> and <code>setFilterMaximumDate()</code> functions as well as the corresponding <code>filterMinimumDate()</code> and <code>filterMaximumDate()</code> functions. We reimplement <a href="https://doc.qt.io/qt-6/qsortfilterproxymodel.html">QSortFilterProxyModel</a>'s <a href="https://doc.qt.io/qt-6/qsortfilterproxymodel.html#filterAcceptsRow">filterAcceptsRow</a>() function to only accept rows with valid dates, and <a href="https://doc.qt.io/qt-6/qsortfilterproxymodel.html#lessThan">QSortFilterProxyModel::lessThan</a>() to be able to sort the senders by their email addresses. Finally, we implement a <code>dateInRange()</code> convenience function that we will use to determine if a date is valid.</p>
<h4 id="mysortfilterproxymodel-class-implementation">MySortFilterProxyModel Class Implementation<a class="plink" href="https://doc.qt.io/qt-6/qtwidgets-itemviews-customsortfiltermodel-example.html#mysortfilterproxymodel-class-implementation" title="Direct link to this headline"></a></h4>
<p>The <code>MySortFilterProxyModel</code> constructor is trivial, passing the parent parameter on to the base class constructor:</p>
<div class="pre"><pre class="cpp prettyprint prettyprinted" style=""><span class="wrap" title="Toggle line wrap" style="display: none;"></span><span class="typ">MySortFilterProxyModel</span><span class="operator"><span class="pun">::</span></span><span class="typ">MySortFilterProxyModel</span><span class="pun">(</span><span class="type"><a href="https://doc.qt.io/qt-6/qobject.html"><span class="typ">QObject</span></a></span><span class="pln"> </span><span class="operator"><span class="pun">*</span></span><span class="pln">parent</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">:</span><span class="pln"> </span><span class="type"><a href="https://doc.qt.io/qt-6/qsortfilterproxymodel.html"><span class="typ">QSortFilterProxyModel</span></a></span><span class="pun">(</span><span class="pln">parent</span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
</span><span class="pun">}</span></pre></div>
<p>The most interesting parts of the <code>MySortFilterProxyModel</code> implementation are the reimplementations of <a href="https://doc.qt.io/qt-6/qsortfilterproxymodel.html">QSortFilterProxyModel</a>'s <a href="https://doc.qt.io/qt-6/qsortfilterproxymodel.html#filterAcceptsRow">filterAcceptsRow</a>() and <a href="https://doc.qt.io/qt-6/qsortfilterproxymodel.html#lessThan">lessThan</a>() functions. Let's first take a look at our customized <code>lessThan()</code> function.</p>
<div class="pre"><pre class="cpp prettyprint prettyprinted" style=""><span class="wrap" title="Toggle line wrap" style="display: none;"></span><span class="type"><span class="kwd">bool</span></span><span class="pln"> </span><span class="typ">MySortFilterProxyModel</span><span class="operator"><span class="pun">::</span></span><span class="pln">lessThan</span><span class="pun">(</span><span class="keyword"><span class="kwd">const</span></span><span class="pln"> </span><span class="type"><a href="https://doc.qt.io/qt-6/qmodelindex.html"><span class="typ">QModelIndex</span></a></span><span class="pln"> </span><span class="operator"><span class="pun">&amp;</span></span><span class="pln">left</span><span class="operator"><span class="pun">,</span></span><span class="pln">
                                      </span><span class="keyword"><span class="kwd">const</span></span><span class="pln"> </span><span class="type"><a href="https://doc.qt.io/qt-6/qmodelindex.html"><span class="typ">QModelIndex</span></a></span><span class="pln"> </span><span class="operator"><span class="pun">&amp;</span></span><span class="pln">right</span><span class="pun">)</span><span class="pln"> </span><span class="keyword"><span class="kwd">const</span></span><span class="pln">
</span><span class="pun">{</span><span class="pln">
    </span><span class="type"><a href="https://doc.qt.io/qt-6/qvariant.html"><span class="typ">QVariant</span></a></span><span class="pln"> leftData </span><span class="operator"><span class="pun">=</span></span><span class="pln"> sourceModel</span><span class="pun">()</span><span class="operator"><span class="pun">-</span></span><span class="operator"><span class="pun">&gt;</span></span><span class="pln">data</span><span class="pun">(</span><span class="pln">left</span><span class="pun">);</span><span class="pln">
    </span><span class="type"><a href="https://doc.qt.io/qt-6/qvariant.html"><span class="typ">QVariant</span></a></span><span class="pln"> rightData </span><span class="operator"><span class="pun">=</span></span><span class="pln"> sourceModel</span><span class="pun">()</span><span class="operator"><span class="pun">-</span></span><span class="operator"><span class="pun">&gt;</span></span><span class="pln">data</span><span class="pun">(</span><span class="pln">right</span><span class="pun">);</span></pre></div>
<p>We want to sort the senders by their email addresses. The <a href="https://doc.qt.io/qt-6/qsortfilterproxymodel.html#lessThan">lessThan</a>() function is used as the &lt; operator when sorting. The default implementation handles a collection of types including <a href="https://doc.qt.io/qt-6/qdatetime.html">QDateTime</a> and String, but in order to be able to sort the senders by their email addresses we must first identify the address within the given string:</p>
<div class="pre"><pre class="cpp prettyprint prettyprinted" style=""><span class="wrap" title="Toggle line wrap" style="display: none;"></span><span class="pln">    </span><span class="keyword"><span class="kwd">if</span></span><span class="pln"> </span><span class="pun">(</span><span class="pln">leftData</span><span class="operator"><span class="pun">.</span></span><span class="pln">userType</span><span class="pun">()</span><span class="pln"> </span><span class="operator"><span class="pun">=</span></span><span class="operator"><span class="pun">=</span></span><span class="pln"> </span><span class="type"><a href="https://doc.qt.io/qt-6/qmetatype.html"><span class="typ">QMetaType</span></a></span><span class="operator"><span class="pun">::</span></span><span class="type"><a href="https://doc.qt.io/qt-6/qdatetime.html"><span class="typ">QDateTime</span></a></span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="keyword"><span class="kwd">return</span></span><span class="pln"> leftData</span><span class="operator"><span class="pun">.</span></span><span class="pln">toDateTime</span><span class="pun">()</span><span class="pln"> </span><span class="operator"><span class="pun">&lt;</span></span><span class="pln"> rightData</span><span class="operator"><span class="pun">.</span></span><span class="pln">toDateTime</span><span class="pun">();</span><span class="pln">
    </span><span class="pun">}</span><span class="pln"> </span><span class="keyword"><span class="kwd">else</span></span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="keyword"><span class="kwd">static</span></span><span class="pln"> </span><span class="keyword"><span class="kwd">const</span></span><span class="pln"> </span><span class="type"><a href="https://doc.qt.io/qt-6/qregularexpression.html"><span class="typ">QRegularExpression</span></a></span><span class="pln"> emailPattern</span><span class="pun">(</span><span class="string"><span class="str">"[\\w\\.]*@[\\w\\.]*"</span></span><span class="pun">);</span><span class="pln">

        </span><span class="type"><a href="https://doc.qt.io/qt-6/qstring.html"><span class="typ">QString</span></a></span><span class="pln"> leftString </span><span class="operator"><span class="pun">=</span></span><span class="pln"> leftData</span><span class="operator"><span class="pun">.</span></span><span class="pln">toString</span><span class="pun">();</span><span class="pln">
        </span><span class="keyword"><span class="kwd">if</span></span><span class="pln"> </span><span class="pun">(</span><span class="pln">left</span><span class="operator"><span class="pun">.</span></span><span class="pln">column</span><span class="pun">()</span><span class="pln"> </span><span class="operator"><span class="pun">=</span></span><span class="operator"><span class="pun">=</span></span><span class="pln"> </span><span class="number"><span class="lit">1</span></span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="keyword"><span class="kwd">const</span></span><span class="pln"> </span><span class="type"><a href="https://doc.qt.io/qt-6/qregularexpressionmatch.html"><span class="typ">QRegularExpressionMatch</span></a></span><span class="pln"> match </span><span class="operator"><span class="pun">=</span></span><span class="pln"> emailPattern</span><span class="operator"><span class="pun">.</span></span><span class="pln">match</span><span class="pun">(</span><span class="pln">leftString</span><span class="pun">);</span><span class="pln">
            </span><span class="keyword"><span class="kwd">if</span></span><span class="pln"> </span><span class="pun">(</span><span class="pln">match</span><span class="operator"><span class="pun">.</span></span><span class="pln">hasMatch</span><span class="pun">())</span><span class="pln">
                leftString </span><span class="operator"><span class="pun">=</span></span><span class="pln"> match</span><span class="operator"><span class="pun">.</span></span><span class="pln">captured</span><span class="pun">(</span><span class="number"><span class="lit">0</span></span><span class="pun">);</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
        </span><span class="type"><a href="https://doc.qt.io/qt-6/qstring.html"><span class="typ">QString</span></a></span><span class="pln"> rightString </span><span class="operator"><span class="pun">=</span></span><span class="pln"> rightData</span><span class="operator"><span class="pun">.</span></span><span class="pln">toString</span><span class="pun">();</span><span class="pln">
        </span><span class="keyword"><span class="kwd">if</span></span><span class="pln"> </span><span class="pun">(</span><span class="pln">right</span><span class="operator"><span class="pun">.</span></span><span class="pln">column</span><span class="pun">()</span><span class="pln"> </span><span class="operator"><span class="pun">=</span></span><span class="operator"><span class="pun">=</span></span><span class="pln"> </span><span class="number"><span class="lit">1</span></span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="keyword"><span class="kwd">const</span></span><span class="pln"> </span><span class="type"><a href="https://doc.qt.io/qt-6/qregularexpressionmatch.html"><span class="typ">QRegularExpressionMatch</span></a></span><span class="pln"> match </span><span class="operator"><span class="pun">=</span></span><span class="pln"> emailPattern</span><span class="operator"><span class="pun">.</span></span><span class="pln">match</span><span class="pun">(</span><span class="pln">rightString</span><span class="pun">);</span><span class="pln">
            </span><span class="keyword"><span class="kwd">if</span></span><span class="pln"> </span><span class="pun">(</span><span class="pln">match</span><span class="operator"><span class="pun">.</span></span><span class="pln">hasMatch</span><span class="pun">())</span><span class="pln">
                rightString </span><span class="operator"><span class="pun">=</span></span><span class="pln"> match</span><span class="operator"><span class="pun">.</span></span><span class="pln">captured</span><span class="pun">(</span><span class="number"><span class="lit">0</span></span><span class="pun">);</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="keyword"><span class="kwd">return</span></span><span class="pln"> </span><span class="type"><a href="https://doc.qt.io/qt-6/qstring.html"><span class="typ">QString</span></a></span><span class="operator"><span class="pun">::</span></span><span class="pln">localeAwareCompare</span><span class="pun">(</span><span class="pln">leftString</span><span class="operator"><span class="pun">,</span></span><span class="pln"> rightString</span><span class="pun">)</span><span class="pln"> </span><span class="operator"><span class="pun">&lt;</span></span><span class="pln"> </span><span class="number"><span class="lit">0</span></span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></pre></div>
<p>We use <a href="https://doc.qt.io/qt-6/qregularexpression.html">QRegularExpression</a> to define a pattern for the addresses we are looking for. The <a href="https://doc.qt.io/qt-6/qregularexpression.html#match">match</a>() function returns a <a href="https://doc.qt.io/qt-6/qregularexpressionmatch.html">QRegularExpressionMatch</a> object which contains the result of the matching. If there is a match, <a href="https://doc.qt.io/qt-6/qregularexpressionmatch.html#hasMatch">hasMatch</a>() returns true. The result of the match can be retrieved with <a href="https://doc.qt.io/qt-6/qregularexpressionmatch.html">QRegularExpressionMatch</a>'s <a href="https://doc.qt.io/qt-6/qregularexpressionmatch.html#captured">captured</a>() function. The entire match has index 0 and the parenthesized subexpressions have indexes starting from 1 (excluding non-capturing parentheses).</p>
<div class="pre"><pre class="cpp prettyprint prettyprinted" style=""><span class="wrap" title="Toggle line wrap" style="display: none;"></span><span class="type"><span class="kwd">bool</span></span><span class="pln"> </span><span class="typ">MySortFilterProxyModel</span><span class="operator"><span class="pun">::</span></span><span class="pln">filterAcceptsRow</span><span class="pun">(</span><span class="type"><span class="kwd">int</span></span><span class="pln"> sourceRow</span><span class="operator"><span class="pun">,</span></span><span class="pln">
                                              </span><span class="keyword"><span class="kwd">const</span></span><span class="pln"> </span><span class="type"><a href="https://doc.qt.io/qt-6/qmodelindex.html"><span class="typ">QModelIndex</span></a></span><span class="pln"> </span><span class="operator"><span class="pun">&amp;</span></span><span class="pln">sourceParent</span><span class="pun">)</span><span class="pln"> </span><span class="keyword"><span class="kwd">const</span></span><span class="pln">
</span><span class="pun">{</span><span class="pln">
    </span><span class="type"><a href="https://doc.qt.io/qt-6/qmodelindex.html"><span class="typ">QModelIndex</span></a></span><span class="pln"> index0 </span><span class="operator"><span class="pun">=</span></span><span class="pln"> sourceModel</span><span class="pun">()</span><span class="operator"><span class="pun">-</span></span><span class="operator"><span class="pun">&gt;</span></span><span class="pln">index</span><span class="pun">(</span><span class="pln">sourceRow</span><span class="operator"><span class="pun">,</span></span><span class="pln"> </span><span class="number"><span class="lit">0</span></span><span class="operator"><span class="pun">,</span></span><span class="pln"> sourceParent</span><span class="pun">);</span><span class="pln">
    </span><span class="type"><a href="https://doc.qt.io/qt-6/qmodelindex.html"><span class="typ">QModelIndex</span></a></span><span class="pln"> index1 </span><span class="operator"><span class="pun">=</span></span><span class="pln"> sourceModel</span><span class="pun">()</span><span class="operator"><span class="pun">-</span></span><span class="operator"><span class="pun">&gt;</span></span><span class="pln">index</span><span class="pun">(</span><span class="pln">sourceRow</span><span class="operator"><span class="pun">,</span></span><span class="pln"> </span><span class="number"><span class="lit">1</span></span><span class="operator"><span class="pun">,</span></span><span class="pln"> sourceParent</span><span class="pun">);</span><span class="pln">
    </span><span class="type"><a href="https://doc.qt.io/qt-6/qmodelindex.html"><span class="typ">QModelIndex</span></a></span><span class="pln"> index2 </span><span class="operator"><span class="pun">=</span></span><span class="pln"> sourceModel</span><span class="pun">()</span><span class="operator"><span class="pun">-</span></span><span class="operator"><span class="pun">&gt;</span></span><span class="pln">index</span><span class="pun">(</span><span class="pln">sourceRow</span><span class="operator"><span class="pun">,</span></span><span class="pln"> </span><span class="number"><span class="lit">2</span></span><span class="operator"><span class="pun">,</span></span><span class="pln"> sourceParent</span><span class="pun">);</span><span class="pln">

    </span><span class="keyword"><span class="kwd">return</span></span><span class="pln"> </span><span class="pun">(</span><span class="pln">sourceModel</span><span class="pun">()</span><span class="operator"><span class="pun">-</span></span><span class="operator"><span class="pun">&gt;</span></span><span class="pln">data</span><span class="pun">(</span><span class="pln">index0</span><span class="pun">)</span><span class="operator"><span class="pun">.</span></span><span class="pln">toString</span><span class="pun">()</span><span class="operator"><span class="pun">.</span></span><span class="pln">contains</span><span class="pun">(</span><span class="pln">filterRegularExpression</span><span class="pun">())</span><span class="pln">
            </span><span class="operator"><span class="pun">|</span></span><span class="operator"><span class="pun">|</span></span><span class="pln"> sourceModel</span><span class="pun">()</span><span class="operator"><span class="pun">-</span></span><span class="operator"><span class="pun">&gt;</span></span><span class="pln">data</span><span class="pun">(</span><span class="pln">index1</span><span class="pun">)</span><span class="operator"><span class="pun">.</span></span><span class="pln">toString</span><span class="pun">()</span><span class="operator"><span class="pun">.</span></span><span class="pln">contains</span><span class="pun">(</span><span class="pln">filterRegularExpression</span><span class="pun">()))</span><span class="pln">
            </span><span class="operator"><span class="pun">&amp;</span></span><span class="operator"><span class="pun">&amp;</span></span><span class="pln"> dateInRange</span><span class="pun">(</span><span class="pln">sourceModel</span><span class="pun">()</span><span class="operator"><span class="pun">-</span></span><span class="operator"><span class="pun">&gt;</span></span><span class="pln">data</span><span class="pun">(</span><span class="pln">index2</span><span class="pun">)</span><span class="operator"><span class="pun">.</span></span><span class="pln">toDate</span><span class="pun">());</span><span class="pln">
</span><span class="pun">}</span></pre></div>
<p>The <a href="https://doc.qt.io/qt-6/qsortfilterproxymodel.html#filterAcceptsRow">filterAcceptsRow</a>() function, on the other hand, is expected to return true if the given row should be included in the model. In our example, a row is accepted if either the subject or the sender contains the given regular expression, and the date is valid.</p>
<div class="pre"><pre class="cpp prettyprint prettyprinted" style=""><span class="wrap" title="Toggle line wrap" style="display: none;"></span><span class="type"><span class="kwd">bool</span></span><span class="pln"> </span><span class="typ">MySortFilterProxyModel</span><span class="operator"><span class="pun">::</span></span><span class="pln">dateInRange</span><span class="pun">(</span><span class="type"><a href="https://doc.qt.io/qt-6/qdate.html"><span class="typ">QDate</span></a></span><span class="pln"> date</span><span class="pun">)</span><span class="pln"> </span><span class="keyword"><span class="kwd">const</span></span><span class="pln">
</span><span class="pun">{</span><span class="pln">
    </span><span class="keyword"><span class="kwd">return</span></span><span class="pln"> </span><span class="pun">(</span><span class="operator"><span class="pun">!</span></span><span class="pln">minDate</span><span class="operator"><span class="pun">.</span></span><span class="pln">isValid</span><span class="pun">()</span><span class="pln"> </span><span class="operator"><span class="pun">|</span></span><span class="operator"><span class="pun">|</span></span><span class="pln"> date </span><span class="operator"><span class="pun">&gt;</span></span><span class="pln"> minDate</span><span class="pun">)</span><span class="pln">
            </span><span class="operator"><span class="pun">&amp;</span></span><span class="operator"><span class="pun">&amp;</span></span><span class="pln"> </span><span class="pun">(</span><span class="operator"><span class="pun">!</span></span><span class="pln">maxDate</span><span class="operator"><span class="pun">.</span></span><span class="pln">isValid</span><span class="pun">()</span><span class="pln"> </span><span class="operator"><span class="pun">|</span></span><span class="operator"><span class="pun">|</span></span><span class="pln"> date </span><span class="operator"><span class="pun">&lt;</span></span><span class="pln"> maxDate</span><span class="pun">);</span><span class="pln">
</span><span class="pun">}</span></pre></div>
<p>We use our custom <code>dateInRange()</code> function to determine if a date is valid.</p>
<p>To be able to filter our data by specifying a given period of time, we also implement functions for getting and setting the minimum and maximum dates:</p>
<div class="pre"><pre class="cpp prettyprint prettyprinted" style=""><span class="wrap" title="Toggle line wrap" style="display: none;"></span><span class="type"><span class="kwd">void</span></span><span class="pln"> </span><span class="typ">MySortFilterProxyModel</span><span class="operator"><span class="pun">::</span></span><span class="pln">setFilterMinimumDate</span><span class="pun">(</span><span class="type"><a href="https://doc.qt.io/qt-6/qdate.html"><span class="typ">QDate</span></a></span><span class="pln"> date</span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
    minDate </span><span class="operator"><span class="pun">=</span></span><span class="pln"> date</span><span class="pun">;</span><span class="pln">
    invalidateFilter</span><span class="pun">();</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="type"><span class="kwd">void</span></span><span class="pln"> </span><span class="typ">MySortFilterProxyModel</span><span class="operator"><span class="pun">::</span></span><span class="pln">setFilterMaximumDate</span><span class="pun">(</span><span class="type"><a href="https://doc.qt.io/qt-6/qdate.html"><span class="typ">QDate</span></a></span><span class="pln"> date</span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
    maxDate </span><span class="operator"><span class="pun">=</span></span><span class="pln"> date</span><span class="pun">;</span><span class="pln">
    invalidateFilter</span><span class="pun">();</span><span class="pln">
</span><span class="pun">}</span></pre></div>
<p>The get functions, <code>filterMinimumDate()</code> and <code>filterMaximumDate()</code>, are trivial and implemented as inline function in the header file.</p>
<p>This completes our custom proxy model. Let's see how we can use it in an application.</p>
<h4 id="window-class-definition">Window Class Definition<a class="plink" href="https://doc.qt.io/qt-6/qtwidgets-itemviews-customsortfiltermodel-example.html#window-class-definition" title="Direct link to this headline"></a></h4>
<p>The <code>CustomFilter</code> class inherits <a href="https://doc.qt.io/qt-6/qwidget.html">QWidget</a>, and provides this example's main application window:</p>
<div class="pre"><pre class="cpp prettyprint prettyprinted" style=""><span class="wrap" title="Toggle line wrap" style="display: none;"></span><span class="keyword"><span class="kwd">class</span></span><span class="pln"> </span><span class="typ">Window</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="keyword"><span class="kwd">public</span></span><span class="pln"> </span><span class="type"><a href="https://doc.qt.io/qt-6/qwidget.html"><span class="typ">QWidget</span></a></span><span class="pln">
</span><span class="pun">{</span><span class="pln">
    Q_OBJECT

</span><span class="keyword"><span class="kwd">public</span></span><span class="pun">:</span><span class="pln">
    </span><span class="typ">Window</span><span class="pun">();</span><span class="pln">

    </span><span class="type"><span class="kwd">void</span></span><span class="pln"> setSourceModel</span><span class="pun">(</span><span class="type"><a href="https://doc.qt.io/qt-6/qabstractitemmodel.html"><span class="typ">QAbstractItemModel</span></a></span><span class="pln"> </span><span class="operator"><span class="pun">*</span></span><span class="pln">model</span><span class="pun">);</span><span class="pln">

</span><span class="keyword"><span class="kwd">private</span></span><span class="pln"> </span><span class="keyword"><span class="pln">slots</span></span><span class="pun">:</span><span class="pln">
    </span><span class="type"><span class="kwd">void</span></span><span class="pln"> textFilterChanged</span><span class="pun">();</span><span class="pln">
    </span><span class="type"><span class="kwd">void</span></span><span class="pln"> dateFilterChanged</span><span class="pun">();</span><span class="pln">

</span><span class="keyword"><span class="kwd">private</span></span><span class="pun">:</span><span class="pln">
    </span><span class="typ">MySortFilterProxyModel</span><span class="pln"> </span><span class="operator"><span class="pun">*</span></span><span class="pln">proxyModel</span><span class="pun">;</span><span class="pln">

    </span><span class="type"><a href="https://doc.qt.io/qt-6/qgroupbox.html"><span class="typ">QGroupBox</span></a></span><span class="pln"> </span><span class="operator"><span class="pun">*</span></span><span class="pln">sourceGroupBox</span><span class="pun">;</span><span class="pln">
    </span><span class="type"><a href="https://doc.qt.io/qt-6/qgroupbox.html"><span class="typ">QGroupBox</span></a></span><span class="pln"> </span><span class="operator"><span class="pun">*</span></span><span class="pln">proxyGroupBox</span><span class="pun">;</span><span class="pln">
    </span><span class="type"><a href="https://doc.qt.io/qt-6/qtreeview.html"><span class="typ">QTreeView</span></a></span><span class="pln"> </span><span class="operator"><span class="pun">*</span></span><span class="pln">sourceView</span><span class="pun">;</span><span class="pln">
    </span><span class="type"><a href="https://doc.qt.io/qt-6/qtreeview.html"><span class="typ">QTreeView</span></a></span><span class="pln"> </span><span class="operator"><span class="pun">*</span></span><span class="pln">proxyView</span><span class="pun">;</span><span class="pln">
    </span><span class="type"><a href="https://doc.qt.io/qt-6/qlabel.html"><span class="typ">QLabel</span></a></span><span class="pln"> </span><span class="operator"><span class="pun">*</span></span><span class="pln">filterPatternLabel</span><span class="pun">;</span><span class="pln">
    </span><span class="type"><a href="https://doc.qt.io/qt-6/qlabel.html"><span class="typ">QLabel</span></a></span><span class="pln"> </span><span class="operator"><span class="pun">*</span></span><span class="pln">fromLabel</span><span class="pun">;</span><span class="pln">
    </span><span class="type"><a href="https://doc.qt.io/qt-6/qlabel.html"><span class="typ">QLabel</span></a></span><span class="pln"> </span><span class="operator"><span class="pun">*</span></span><span class="pln">toLabel</span><span class="pun">;</span><span class="pln">
    </span><span class="typ">FilterWidget</span><span class="pln"> </span><span class="operator"><span class="pun">*</span></span><span class="pln">filterWidget</span><span class="pun">;</span><span class="pln">
    </span><span class="type"><a href="https://doc.qt.io/qt-6/qdateedit.html"><span class="typ">QDateEdit</span></a></span><span class="pln"> </span><span class="operator"><span class="pun">*</span></span><span class="pln">fromDateEdit</span><span class="pun">;</span><span class="pln">
    </span><span class="type"><a href="https://doc.qt.io/qt-6/qdateedit.html"><span class="typ">QDateEdit</span></a></span><span class="pln"> </span><span class="operator"><span class="pun">*</span></span><span class="pln">toDateEdit</span><span class="pun">;</span><span class="pln">
</span><span class="pun">};</span></pre></div>
<p>We implement two private slots, <code>textFilterChanged()</code> and <code>dateFilterChanged()</code>, to respond to the user changing the filter pattern, case sensitivity, or any of the dates. In addition, we implement a public <code>setSourceModel()</code> convenience function to set up the model/ view relation.</p>
<h4 id="window-class-implementation">Window Class Implementation<a class="plink" href="https://doc.qt.io/qt-6/qtwidgets-itemviews-customsortfiltermodel-example.html#window-class-implementation" title="Direct link to this headline"></a></h4>
<p>In this example, we have chosen to create and set the source model in the <code>main</code> () function (which we will come back to later). So when constructing the main application window, we assume that a source model already exists and start by creating an instance of our custom proxy model:</p>
<div class="pre"><pre class="cpp prettyprint prettyprinted" style=""><span class="wrap" title="Toggle line wrap" style="display: none;"></span><span class="typ">Window</span><span class="operator"><span class="pun">::</span></span><span class="typ">Window</span><span class="pun">()</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
    proxyModel </span><span class="operator"><span class="pun">=</span></span><span class="pln"> </span><span class="keyword"><span class="kwd">new</span></span><span class="pln"> </span><span class="typ">MySortFilterProxyModel</span><span class="pun">(</span><span class="keyword"><span class="kwd">this</span></span><span class="pun">);</span></pre></div>
<p>We set the <a href="https://doc.qt.io/qt-6/qsortfilterproxymodel.html#dynamicSortFilter-prop">dynamicSortFilter</a> property that holds whether the proxy model is dynamically sorted and filtered. By setting this property to true, we ensure that the model is sorted and filtered whenever the contents of the source model change.</p>
<p>The main application window shows views of both the source model and the proxy model. The source view is quite simple:</p>
<div class="pre"><pre class="cpp prettyprint prettyprinted" style=""><span class="wrap" title="Toggle line wrap" style="display: none;"></span><span class="pln">sourceView </span><span class="operator"><span class="pun">=</span></span><span class="pln"> </span><span class="keyword"><span class="kwd">new</span></span><span class="pln"> </span><span class="type"><a href="https://doc.qt.io/qt-6/qtreeview.html"><span class="typ">QTreeView</span></a></span><span class="pun">;</span><span class="pln">
sourceView</span><span class="operator"><span class="pun">-</span></span><span class="operator"><span class="pun">&gt;</span></span><span class="pln">setRootIsDecorated</span><span class="pun">(</span><span class="keyword"><span class="kwd">false</span></span><span class="pun">);</span><span class="pln">
sourceView</span><span class="operator"><span class="pun">-</span></span><span class="operator"><span class="pun">&gt;</span></span><span class="pln">setAlternatingRowColors</span><span class="pun">(</span><span class="keyword"><span class="kwd">true</span></span><span class="pun">);</span></pre></div>
<p>The <a href="https://doc.qt.io/qt-6/qtreeview.html">QTreeView</a> class provides a default model/view implementation of a tree view. Our view implements a tree representation of items in the application's source model.</p>
<div class="pre"><pre class="cpp prettyprint prettyprinted" style=""><span class="wrap" title="Toggle line wrap" style="display: none;"></span><span class="pln">sourceLayout</span><span class="operator"><span class="pun">-</span></span><span class="operator"><span class="pun">&gt;</span></span><span class="pln">addWidget</span><span class="pun">(</span><span class="pln">sourceView</span><span class="pun">);</span><span class="pln">
sourceGroupBox </span><span class="operator"><span class="pun">=</span></span><span class="pln"> </span><span class="keyword"><span class="kwd">new</span></span><span class="pln"> </span><span class="type"><a href="https://doc.qt.io/qt-6/qgroupbox.html"><span class="typ">QGroupBox</span></a></span><span class="pun">(</span><span class="pln">tr</span><span class="pun">(</span><span class="string"><span class="str">"Original Model"</span></span><span class="pun">));</span><span class="pln">
sourceGroupBox</span><span class="operator"><span class="pun">-</span></span><span class="operator"><span class="pun">&gt;</span></span><span class="pln">setLayout</span><span class="pun">(</span><span class="pln">sourceLayout</span><span class="pun">);</span></pre></div>
<p>The <a href="https://doc.qt.io/qt-6/qtreeview.html">QTreeView</a> class provides a default model/view implementation of a tree view; our view implements a tree representation of items in the application's source model. We add our view widget to a layout that we install on a corresponding group box.</p>
<p>The proxy model view, on the other hand, contains several widgets controlling the various aspects of transforming the source model's data structure:</p>
<div class="pre"><pre class="cpp prettyprint prettyprinted" style=""><span class="wrap" title="Toggle line wrap" style="display: none;"></span><span class="pln">filterWidget </span><span class="operator"><span class="pun">=</span></span><span class="pln"> </span><span class="keyword"><span class="kwd">new</span></span><span class="pln"> </span><span class="typ">FilterWidget</span><span class="pun">;</span><span class="pln">
filterWidget</span><span class="operator"><span class="pun">-</span></span><span class="operator"><span class="pun">&gt;</span></span><span class="pln">setText</span><span class="pun">(</span><span class="pln">tr</span><span class="pun">(</span><span class="string"><span class="str">"Grace|Sports"</span></span><span class="pun">));</span><span class="pln">
connect</span><span class="pun">(</span><span class="pln">filterWidget</span><span class="operator"><span class="pun">,</span></span><span class="pln"> </span><span class="operator"><span class="pun">&amp;</span></span><span class="typ">FilterWidget</span><span class="operator"><span class="pun">::</span></span><span class="pln">filterChanged</span><span class="operator"><span class="pun">,</span></span><span class="pln"> </span><span class="keyword"><span class="kwd">this</span></span><span class="operator"><span class="pun">,</span></span><span class="pln"> </span><span class="operator"><span class="pun">&amp;</span></span><span class="typ">Window</span><span class="operator"><span class="pun">::</span></span><span class="pln">textFilterChanged</span><span class="pun">);</span><span class="pln">

filterPatternLabel </span><span class="operator"><span class="pun">=</span></span><span class="pln"> </span><span class="keyword"><span class="kwd">new</span></span><span class="pln"> </span><span class="type"><a href="https://doc.qt.io/qt-6/qlabel.html"><span class="typ">QLabel</span></a></span><span class="pun">(</span><span class="pln">tr</span><span class="pun">(</span><span class="string"><span class="str">"&amp;Filter pattern:"</span></span><span class="pun">));</span><span class="pln">
filterPatternLabel</span><span class="operator"><span class="pun">-</span></span><span class="operator"><span class="pun">&gt;</span></span><span class="pln">setBuddy</span><span class="pun">(</span><span class="pln">filterWidget</span><span class="pun">);</span><span class="pln">

fromDateEdit </span><span class="operator"><span class="pun">=</span></span><span class="pln"> </span><span class="keyword"><span class="kwd">new</span></span><span class="pln"> </span><span class="type"><a href="https://doc.qt.io/qt-6/qdateedit.html"><span class="typ">QDateEdit</span></a></span><span class="pun">;</span><span class="pln">
fromDateEdit</span><span class="operator"><span class="pun">-</span></span><span class="operator"><span class="pun">&gt;</span></span><span class="pln">setDate</span><span class="pun">(</span><span class="type"><a href="https://doc.qt.io/qt-6/qdate.html"><span class="typ">QDate</span></a></span><span class="pun">(</span><span class="number"><span class="lit">1970</span></span><span class="operator"><span class="pun">,</span></span><span class="pln"> </span><span class="number"><span class="lit">01</span></span><span class="operator"><span class="pun">,</span></span><span class="pln"> </span><span class="number"><span class="lit">01</span></span><span class="pun">));</span><span class="pln">
fromLabel </span><span class="operator"><span class="pun">=</span></span><span class="pln"> </span><span class="keyword"><span class="kwd">new</span></span><span class="pln"> </span><span class="type"><a href="https://doc.qt.io/qt-6/qlabel.html"><span class="typ">QLabel</span></a></span><span class="pun">(</span><span class="pln">tr</span><span class="pun">(</span><span class="string"><span class="str">"F&amp;rom:"</span></span><span class="pun">));</span><span class="pln">
fromLabel</span><span class="operator"><span class="pun">-</span></span><span class="operator"><span class="pun">&gt;</span></span><span class="pln">setBuddy</span><span class="pun">(</span><span class="pln">fromDateEdit</span><span class="pun">);</span><span class="pln">

toDateEdit </span><span class="operator"><span class="pun">=</span></span><span class="pln"> </span><span class="keyword"><span class="kwd">new</span></span><span class="pln"> </span><span class="type"><a href="https://doc.qt.io/qt-6/qdateedit.html"><span class="typ">QDateEdit</span></a></span><span class="pun">;</span><span class="pln">
toDateEdit</span><span class="operator"><span class="pun">-</span></span><span class="operator"><span class="pun">&gt;</span></span><span class="pln">setDate</span><span class="pun">(</span><span class="type"><a href="https://doc.qt.io/qt-6/qdate.html"><span class="typ">QDate</span></a></span><span class="pun">(</span><span class="number"><span class="lit">2099</span></span><span class="operator"><span class="pun">,</span></span><span class="pln"> </span><span class="number"><span class="lit">12</span></span><span class="operator"><span class="pun">,</span></span><span class="pln"> </span><span class="number"><span class="lit">31</span></span><span class="pun">));</span><span class="pln">
toLabel </span><span class="operator"><span class="pun">=</span></span><span class="pln"> </span><span class="keyword"><span class="kwd">new</span></span><span class="pln"> </span><span class="type"><a href="https://doc.qt.io/qt-6/qlabel.html"><span class="typ">QLabel</span></a></span><span class="pun">(</span><span class="pln">tr</span><span class="pun">(</span><span class="string"><span class="str">"&amp;To:"</span></span><span class="pun">));</span><span class="pln">
toLabel</span><span class="operator"><span class="pun">-</span></span><span class="operator"><span class="pun">&gt;</span></span><span class="pln">setBuddy</span><span class="pun">(</span><span class="pln">toDateEdit</span><span class="pun">);</span><span class="pln">

connect</span><span class="pun">(</span><span class="pln">filterWidget</span><span class="operator"><span class="pun">,</span></span><span class="pln"> </span><span class="operator"><span class="pun">&amp;</span></span><span class="type"><a href="https://doc.qt.io/qt-6/qlineedit.html"><span class="typ">QLineEdit</span></a></span><span class="operator"><span class="pun">::</span></span><span class="pln">textChanged</span><span class="operator"><span class="pun">,</span></span><span class="pln">
        </span><span class="keyword"><span class="kwd">this</span></span><span class="operator"><span class="pun">,</span></span><span class="pln"> </span><span class="operator"><span class="pun">&amp;</span></span><span class="typ">Window</span><span class="operator"><span class="pun">::</span></span><span class="pln">textFilterChanged</span><span class="pun">);</span><span class="pln">
connect</span><span class="pun">(</span><span class="pln">fromDateEdit</span><span class="operator"><span class="pun">,</span></span><span class="pln"> </span><span class="operator"><span class="pun">&amp;</span></span><span class="type"><a href="https://doc.qt.io/qt-6/qdatetimeedit.html"><span class="typ">QDateTimeEdit</span></a></span><span class="operator"><span class="pun">::</span></span><span class="pln">dateChanged</span><span class="operator"><span class="pun">,</span></span><span class="pln">
        </span><span class="keyword"><span class="kwd">this</span></span><span class="operator"><span class="pun">,</span></span><span class="pln"> </span><span class="operator"><span class="pun">&amp;</span></span><span class="typ">Window</span><span class="operator"><span class="pun">::</span></span><span class="pln">dateFilterChanged</span><span class="pun">);</span><span class="pln">
connect</span><span class="pun">(</span><span class="pln">toDateEdit</span><span class="operator"><span class="pun">,</span></span><span class="pln"> </span><span class="operator"><span class="pun">&amp;</span></span><span class="type"><a href="https://doc.qt.io/qt-6/qdatetimeedit.html"><span class="typ">QDateTimeEdit</span></a></span><span class="operator"><span class="pun">::</span></span><span class="pln">dateChanged</span><span class="operator"><span class="pun">,</span></span><span class="pln">
</span><span class="keyword"><span class="kwd">this</span></span><span class="operator"><span class="pun">,</span></span><span class="pln"> </span><span class="operator"><span class="pun">&amp;</span></span><span class="typ">Window</span><span class="operator"><span class="pun">::</span></span><span class="pln">dateFilterChanged</span><span class="pun">);</span></pre></div>
<p>Note that whenever the user changes one of the filtering options, we must explicitly reapply the filter. This is done by connecting the various editors to functions that update the proxy model.</p>
<div class="pre"><pre class="cpp prettyprint prettyprinted" style=""><span class="wrap" title="Toggle line wrap" style="display: none;"></span><span class="pln">proxyView </span><span class="operator"><span class="pun">=</span></span><span class="pln"> </span><span class="keyword"><span class="kwd">new</span></span><span class="pln"> </span><span class="type"><a href="https://doc.qt.io/qt-6/qtreeview.html"><span class="typ">QTreeView</span></a></span><span class="pun">;</span><span class="pln">
proxyView</span><span class="operator"><span class="pun">-</span></span><span class="operator"><span class="pun">&gt;</span></span><span class="pln">setRootIsDecorated</span><span class="pun">(</span><span class="keyword"><span class="kwd">false</span></span><span class="pun">);</span><span class="pln">
proxyView</span><span class="operator"><span class="pun">-</span></span><span class="operator"><span class="pun">&gt;</span></span><span class="pln">setAlternatingRowColors</span><span class="pun">(</span><span class="keyword"><span class="kwd">true</span></span><span class="pun">);</span><span class="pln">
proxyView</span><span class="operator"><span class="pun">-</span></span><span class="operator"><span class="pun">&gt;</span></span><span class="pln">setModel</span><span class="pun">(</span><span class="pln">proxyModel</span><span class="pun">);</span><span class="pln">
proxyView</span><span class="operator"><span class="pun">-</span></span><span class="operator"><span class="pun">&gt;</span></span><span class="pln">setSortingEnabled</span><span class="pun">(</span><span class="keyword"><span class="kwd">true</span></span><span class="pun">);</span><span class="pln">
proxyView</span><span class="operator"><span class="pun">-</span></span><span class="operator"><span class="pun">&gt;</span></span><span class="pln">sortByColumn</span><span class="pun">(</span><span class="number"><span class="lit">1</span></span><span class="operator"><span class="pun">,</span></span><span class="pln"> </span><span class="type"><a href="https://doc.qt.io/qt-6/qt.html"><span class="typ">Qt</span></a></span><span class="operator"><span class="pun">::</span></span><span class="typ">AscendingOrder</span><span class="pun">);</span><span class="pln">

</span><span class="type"><a href="https://doc.qt.io/qt-6/qgridlayout.html"><span class="typ">QGridLayout</span></a></span><span class="pln"> </span><span class="operator"><span class="pun">*</span></span><span class="pln">proxyLayout </span><span class="operator"><span class="pun">=</span></span><span class="pln"> </span><span class="keyword"><span class="kwd">new</span></span><span class="pln"> </span><span class="type"><a href="https://doc.qt.io/qt-6/qgridlayout.html"><span class="typ">QGridLayout</span></a></span><span class="pun">;</span><span class="pln">
proxyLayout</span><span class="operator"><span class="pun">-</span></span><span class="operator"><span class="pun">&gt;</span></span><span class="pln">addWidget</span><span class="pun">(</span><span class="pln">proxyView</span><span class="operator"><span class="pun">,</span></span><span class="pln"> </span><span class="number"><span class="lit">0</span></span><span class="operator"><span class="pun">,</span></span><span class="pln"> </span><span class="number"><span class="lit">0</span></span><span class="operator"><span class="pun">,</span></span><span class="pln"> </span><span class="number"><span class="lit">1</span></span><span class="operator"><span class="pun">,</span></span><span class="pln"> </span><span class="number"><span class="lit">3</span></span><span class="pun">);</span><span class="pln">
proxyLayout</span><span class="operator"><span class="pun">-</span></span><span class="operator"><span class="pun">&gt;</span></span><span class="pln">addWidget</span><span class="pun">(</span><span class="pln">filterPatternLabel</span><span class="operator"><span class="pun">,</span></span><span class="pln"> </span><span class="number"><span class="lit">1</span></span><span class="operator"><span class="pun">,</span></span><span class="pln"> </span><span class="number"><span class="lit">0</span></span><span class="pun">);</span><span class="pln">
proxyLayout</span><span class="operator"><span class="pun">-</span></span><span class="operator"><span class="pun">&gt;</span></span><span class="pln">addWidget</span><span class="pun">(</span><span class="pln">filterWidget</span><span class="operator"><span class="pun">,</span></span><span class="pln"> </span><span class="number"><span class="lit">1</span></span><span class="operator"><span class="pun">,</span></span><span class="pln"> </span><span class="number"><span class="lit">1</span></span><span class="pun">);</span><span class="pln">
proxyLayout</span><span class="operator"><span class="pun">-</span></span><span class="operator"><span class="pun">&gt;</span></span><span class="pln">addWidget</span><span class="pun">(</span><span class="pln">fromLabel</span><span class="operator"><span class="pun">,</span></span><span class="pln"> </span><span class="number"><span class="lit">3</span></span><span class="operator"><span class="pun">,</span></span><span class="pln"> </span><span class="number"><span class="lit">0</span></span><span class="pun">);</span><span class="pln">
proxyLayout</span><span class="operator"><span class="pun">-</span></span><span class="operator"><span class="pun">&gt;</span></span><span class="pln">addWidget</span><span class="pun">(</span><span class="pln">fromDateEdit</span><span class="operator"><span class="pun">,</span></span><span class="pln"> </span><span class="number"><span class="lit">3</span></span><span class="operator"><span class="pun">,</span></span><span class="pln"> </span><span class="number"><span class="lit">1</span></span><span class="operator"><span class="pun">,</span></span><span class="pln"> </span><span class="number"><span class="lit">1</span></span><span class="operator"><span class="pun">,</span></span><span class="pln"> </span><span class="number"><span class="lit">2</span></span><span class="pun">);</span><span class="pln">
proxyLayout</span><span class="operator"><span class="pun">-</span></span><span class="operator"><span class="pun">&gt;</span></span><span class="pln">addWidget</span><span class="pun">(</span><span class="pln">toLabel</span><span class="operator"><span class="pun">,</span></span><span class="pln"> </span><span class="number"><span class="lit">4</span></span><span class="operator"><span class="pun">,</span></span><span class="pln"> </span><span class="number"><span class="lit">0</span></span><span class="pun">);</span><span class="pln">
proxyLayout</span><span class="operator"><span class="pun">-</span></span><span class="operator"><span class="pun">&gt;</span></span><span class="pln">addWidget</span><span class="pun">(</span><span class="pln">toDateEdit</span><span class="operator"><span class="pun">,</span></span><span class="pln"> </span><span class="number"><span class="lit">4</span></span><span class="operator"><span class="pun">,</span></span><span class="pln"> </span><span class="number"><span class="lit">1</span></span><span class="operator"><span class="pun">,</span></span><span class="pln"> </span><span class="number"><span class="lit">1</span></span><span class="operator"><span class="pun">,</span></span><span class="pln"> </span><span class="number"><span class="lit">2</span></span><span class="pun">);</span><span class="pln">

proxyGroupBox </span><span class="operator"><span class="pun">=</span></span><span class="pln"> </span><span class="keyword"><span class="kwd">new</span></span><span class="pln"> </span><span class="type"><a href="https://doc.qt.io/qt-6/qgroupbox.html"><span class="typ">QGroupBox</span></a></span><span class="pun">(</span><span class="pln">tr</span><span class="pun">(</span><span class="string"><span class="str">"Sorted/Filtered Model"</span></span><span class="pun">));</span><span class="pln">
proxyGroupBox</span><span class="operator"><span class="pun">-</span></span><span class="operator"><span class="pun">&gt;</span></span><span class="pln">setLayout</span><span class="pun">(</span><span class="pln">proxyLayout</span><span class="pun">);</span></pre></div>
<p>The sorting will be handled by the view. All we have to do is to enable sorting for our proxy view by setting the <a href="https://doc.qt.io/qt-6/qtreeview.html#sortingEnabled-prop">QTreeView::sortingEnabled</a> property (which is false by default). Then we add all the filtering widgets and the proxy view to a layout that we install on a corresponding group box.</p>
<div class="pre"><pre class="cpp prettyprint prettyprinted" style=""><span class="wrap" title="Toggle line wrap" style="display: none;"></span><span class="type"><a href="https://doc.qt.io/qt-6/qvboxlayout.html"><span class="typ">QVBoxLayout</span></a></span><span class="pln"> </span><span class="operator"><span class="pun">*</span></span><span class="pln">mainLayout </span><span class="operator"><span class="pun">=</span></span><span class="pln"> </span><span class="keyword"><span class="kwd">new</span></span><span class="pln"> </span><span class="type"><a href="https://doc.qt.io/qt-6/qvboxlayout.html"><span class="typ">QVBoxLayout</span></a></span><span class="pun">;</span><span class="pln">
mainLayout</span><span class="operator"><span class="pun">-</span></span><span class="operator"><span class="pun">&gt;</span></span><span class="pln">addWidget</span><span class="pun">(</span><span class="pln">sourceGroupBox</span><span class="pun">);</span><span class="pln">
mainLayout</span><span class="operator"><span class="pun">-</span></span><span class="operator"><span class="pun">&gt;</span></span><span class="pln">addWidget</span><span class="pun">(</span><span class="pln">proxyGroupBox</span><span class="pun">);</span><span class="pln">
setLayout</span><span class="pun">(</span><span class="pln">mainLayout</span><span class="pun">);</span><span class="pln">

setWindowTitle</span><span class="pun">(</span><span class="pln">tr</span><span class="pun">(</span><span class="string"><span class="str">"Custom Sort/Filter Model"</span></span><span class="pun">));</span><span class="pln">
resize</span><span class="pun">(</span><span class="number"><span class="lit">500</span></span><span class="operator"><span class="pun">,</span></span><span class="pln"> </span><span class="number"><span class="lit">450</span></span><span class="pun">);</span><span class="pln">
</span><span class="pun">}</span></pre></div>
<p>Finally, after putting our two group boxes into another layout that we install on our main application widget, we customize the application window.</p>
<p>As mentioned above, we create the source model in the <code>main</code> () function, calling the <code>Window::setSourceModel()</code> function to make the application use it:</p>
<div class="pre"><pre class="cpp prettyprint prettyprinted" style=""><span class="wrap" title="Toggle line wrap" style="display: none;"></span><span class="type"><span class="kwd">void</span></span><span class="pln"> </span><span class="typ">Window</span><span class="operator"><span class="pun">::</span></span><span class="pln">setSourceModel</span><span class="pun">(</span><span class="type"><a href="https://doc.qt.io/qt-6/qabstractitemmodel.html"><span class="typ">QAbstractItemModel</span></a></span><span class="pln"> </span><span class="operator"><span class="pun">*</span></span><span class="pln">model</span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
    proxyModel</span><span class="operator"><span class="pun">-</span></span><span class="operator"><span class="pun">&gt;</span></span><span class="pln">setSourceModel</span><span class="pun">(</span><span class="pln">model</span><span class="pun">);</span><span class="pln">
    sourceView</span><span class="operator"><span class="pun">-</span></span><span class="operator"><span class="pun">&gt;</span></span><span class="pln">setModel</span><span class="pun">(</span><span class="pln">model</span><span class="pun">);</span><span class="pln">

    </span><span class="keyword"><span class="kwd">for</span></span><span class="pln"> </span><span class="pun">(</span><span class="type"><span class="kwd">int</span></span><span class="pln"> i </span><span class="operator"><span class="pun">=</span></span><span class="pln"> </span><span class="number"><span class="lit">0</span></span><span class="pun">;</span><span class="pln"> i </span><span class="operator"><span class="pun">&lt;</span></span><span class="pln"> proxyModel</span><span class="operator"><span class="pun">-</span></span><span class="operator"><span class="pun">&gt;</span></span><span class="pln">columnCount</span><span class="pun">();</span><span class="pln"> </span><span class="operator"><span class="pun">+</span></span><span class="operator"><span class="pun">+</span></span><span class="pln">i</span><span class="pun">)</span><span class="pln">
        proxyView</span><span class="operator"><span class="pun">-</span></span><span class="operator"><span class="pun">&gt;</span></span><span class="pln">resizeColumnToContents</span><span class="pun">(</span><span class="pln">i</span><span class="pun">);</span><span class="pln">
    </span><span class="keyword"><span class="kwd">for</span></span><span class="pln"> </span><span class="pun">(</span><span class="type"><span class="kwd">int</span></span><span class="pln"> i </span><span class="operator"><span class="pun">=</span></span><span class="pln"> </span><span class="number"><span class="lit">0</span></span><span class="pun">;</span><span class="pln"> i </span><span class="operator"><span class="pun">&lt;</span></span><span class="pln"> model</span><span class="operator"><span class="pun">-</span></span><span class="operator"><span class="pun">&gt;</span></span><span class="pln">columnCount</span><span class="pun">();</span><span class="pln"> </span><span class="operator"><span class="pun">+</span></span><span class="operator"><span class="pun">+</span></span><span class="pln">i</span><span class="pun">)</span><span class="pln">
        sourceView</span><span class="operator"><span class="pun">-</span></span><span class="operator"><span class="pun">&gt;</span></span><span class="pln">resizeColumnToContents</span><span class="pun">(</span><span class="pln">i</span><span class="pun">);</span><span class="pln">
</span><span class="pun">}</span></pre></div>
<p>The <a href="https://doc.qt.io/qt-6/qsortfilterproxymodel.html#setSourceModel">QSortFilterProxyModel::setSourceModel</a>() function makes the proxy model process the data in the given model, in this case out mail model. The <a href="https://doc.qt.io/qt-6/qabstractitemview.html#setModel">setModel</a>() that the view widget inherits from the <a href="https://doc.qt.io/qt-6/qabstractitemmodel.html">QAbstractItemModel</a> class, sets the model for the view to present. Note that the latter function will also create and set a new selection model.</p>
<div class="pre"><pre class="cpp prettyprint prettyprinted" style=""><span class="wrap" title="Toggle line wrap" style="display: none;"></span><span class="type"><span class="kwd">void</span></span><span class="pln"> </span><span class="typ">Window</span><span class="operator"><span class="pun">::</span></span><span class="pln">textFilterChanged</span><span class="pun">()</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
    </span><span class="typ">FilterWidget</span><span class="operator"><span class="pun">::</span></span><span class="typ">PatternSyntax</span><span class="pln"> s </span><span class="operator"><span class="pun">=</span></span><span class="pln"> filterWidget</span><span class="operator"><span class="pun">-</span></span><span class="operator"><span class="pun">&gt;</span></span><span class="pln">patternSyntax</span><span class="pun">();</span><span class="pln">
    </span><span class="type"><a href="https://doc.qt.io/qt-6/qstring.html"><span class="typ">QString</span></a></span><span class="pln"> pattern </span><span class="operator"><span class="pun">=</span></span><span class="pln"> filterWidget</span><span class="operator"><span class="pun">-</span></span><span class="operator"><span class="pun">&gt;</span></span><span class="pln">text</span><span class="pun">();</span><span class="pln">
    </span><span class="keyword"><span class="kwd">switch</span></span><span class="pln"> </span><span class="pun">(</span><span class="pln">s</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="keyword"><span class="kwd">case</span></span><span class="pln"> </span><span class="typ">FilterWidget</span><span class="operator"><span class="pun">::</span></span><span class="typ">Wildcard</span><span class="pun">:</span><span class="pln">
        pattern </span><span class="operator"><span class="pun">=</span></span><span class="pln"> </span><span class="type"><a href="https://doc.qt.io/qt-6/qregularexpression.html"><span class="typ">QRegularExpression</span></a></span><span class="operator"><span class="pun">::</span></span><span class="pln">wildcardToRegularExpression</span><span class="pun">(</span><span class="pln">pattern</span><span class="pun">);</span><span class="pln">
        </span><span class="keyword"><span class="kwd">break</span></span><span class="pun">;</span><span class="pln">
    </span><span class="keyword"><span class="kwd">case</span></span><span class="pln"> </span><span class="typ">FilterWidget</span><span class="operator"><span class="pun">::</span></span><span class="typ">FixedString</span><span class="pun">:</span><span class="pln">
        pattern </span><span class="operator"><span class="pun">=</span></span><span class="pln"> </span><span class="type"><a href="https://doc.qt.io/qt-6/qregularexpression.html"><span class="typ">QRegularExpression</span></a></span><span class="operator"><span class="pun">::</span></span><span class="pln">escape</span><span class="pun">(</span><span class="pln">pattern</span><span class="pun">);</span><span class="pln">
        </span><span class="keyword"><span class="kwd">break</span></span><span class="pun">;</span><span class="pln">
    </span><span class="keyword"><span class="kwd">default</span></span><span class="pun">:</span><span class="pln">
        </span><span class="keyword"><span class="kwd">break</span></span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="type"><a href="https://doc.qt.io/qt-6/qregularexpression.html"><span class="typ">QRegularExpression</span></a></span><span class="operator"><span class="pun">::</span></span><span class="typ">PatternOptions</span><span class="pln"> options </span><span class="operator"><span class="pun">=</span></span><span class="pln"> </span><span class="type"><a href="https://doc.qt.io/qt-6/qregularexpression.html"><span class="typ">QRegularExpression</span></a></span><span class="operator"><span class="pun">::</span></span><span class="typ">NoPatternOption</span><span class="pun">;</span><span class="pln">
    </span><span class="keyword"><span class="kwd">if</span></span><span class="pln"> </span><span class="pun">(</span><span class="pln">filterWidget</span><span class="operator"><span class="pun">-</span></span><span class="operator"><span class="pun">&gt;</span></span><span class="pln">caseSensitivity</span><span class="pun">()</span><span class="pln"> </span><span class="operator"><span class="pun">=</span></span><span class="operator"><span class="pun">=</span></span><span class="pln"> </span><span class="type"><a href="https://doc.qt.io/qt-6/qt.html"><span class="typ">Qt</span></a></span><span class="operator"><span class="pun">::</span></span><span class="typ">CaseInsensitive</span><span class="pun">)</span><span class="pln">
        options </span><span class="operator"><span class="pun">|</span></span><span class="operator"><span class="pun">=</span></span><span class="pln"> </span><span class="type"><a href="https://doc.qt.io/qt-6/qregularexpression.html"><span class="typ">QRegularExpression</span></a></span><span class="operator"><span class="pun">::</span></span><span class="typ">CaseInsensitiveOption</span><span class="pun">;</span><span class="pln">
    </span><span class="type"><a href="https://doc.qt.io/qt-6/qregularexpression.html"><span class="typ">QRegularExpression</span></a></span><span class="pln"> regularExpression</span><span class="pun">(</span><span class="pln">pattern</span><span class="operator"><span class="pun">,</span></span><span class="pln"> options</span><span class="pun">);</span><span class="pln">
    proxyModel</span><span class="operator"><span class="pun">-</span></span><span class="operator"><span class="pun">&gt;</span></span><span class="pln">setFilterRegularExpression</span><span class="pun">(</span><span class="pln">regularExpression</span><span class="pun">);</span><span class="pln">
</span><span class="pun">}</span></pre></div>
<p>The <code>textFilterChanged()</code> function is called whenever the user changes the filter pattern or the case sensitivity.</p>
<p>We first retrieve the preferred syntax (the FilterWidget::PatternSyntax enum is used to interpret the meaning of the given pattern), then we determine the preferred case sensitivity. Based on these preferences and the current filter pattern, we set the proxy model's <a href="https://doc.qt.io/qt-6/qsortfilterproxymodel.html#filterRegularExpression-prop">filterRegularExpression</a> property. The <a href="https://doc.qt.io/qt-6/qsortfilterproxymodel.html#filterRegularExpression-prop">filterRegularExpression</a> property holds the regular expression used to filter the contents of the source model. Note that calling <a href="https://doc.qt.io/qt-6/qsortfilterproxymodel.html">QSortFilterProxyModel</a>'s <a href="https://doc.qt.io/qt-6/qsortfilterproxymodel.html#setFilterRegularExpression">setFilterRegularExpression</a>() function also updates the model.</p>
<div class="pre"><pre class="cpp prettyprint prettyprinted" style=""><span class="wrap" title="Toggle line wrap" style="display: none;"></span><span class="type"><span class="kwd">void</span></span><span class="pln"> </span><span class="typ">Window</span><span class="operator"><span class="pun">::</span></span><span class="pln">dateFilterChanged</span><span class="pun">()</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
    proxyModel</span><span class="operator"><span class="pun">-</span></span><span class="operator"><span class="pun">&gt;</span></span><span class="pln">setFilterMinimumDate</span><span class="pun">(</span><span class="pln">fromDateEdit</span><span class="operator"><span class="pun">-</span></span><span class="operator"><span class="pun">&gt;</span></span><span class="pln">date</span><span class="pun">());</span><span class="pln">
    proxyModel</span><span class="operator"><span class="pun">-</span></span><span class="operator"><span class="pun">&gt;</span></span><span class="pln">setFilterMaximumDate</span><span class="pun">(</span><span class="pln">toDateEdit</span><span class="operator"><span class="pun">-</span></span><span class="operator"><span class="pun">&gt;</span></span><span class="pln">date</span><span class="pun">());</span><span class="pln">
</span><span class="pun">}</span></pre></div>
<p>The <code>dateFilterChanged()</code> function is called whenever the user modifies the range of valid dates. We retrieve the new dates from the user interface, and call the corresponding functions (provided by our custom proxy model) to set the proxy model's minimum and maximum dates. As we explained above, calling these functions also updates the model.</p>
<h4 id="the-main-function">The Main() Function<a class="plink" href="https://doc.qt.io/qt-6/qtwidgets-itemviews-customsortfiltermodel-example.html#the-main-function" title="Direct link to this headline"></a></h4>
<p>In this example, we have separated the application from the source model by creating the model in the <code>main</code> () function. First we create the application, then we create the source model:</p>
<div class="pre"><pre class="cpp prettyprint prettyprinted" style=""><span class="wrap" title="Toggle line wrap" style="display: none;"></span><span class="type"><span class="kwd">int</span></span><span class="pln"> main</span><span class="pun">(</span><span class="type"><span class="kwd">int</span></span><span class="pln"> argc</span><span class="operator"><span class="pun">,</span></span><span class="pln"> </span><span class="type"><span class="kwd">char</span></span><span class="pln"> </span><span class="operator"><span class="pun">*</span></span><span class="pln">argv</span><span class="operator"><span class="pun">[</span></span><span class="operator"><span class="pun">]</span></span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
    </span><span class="type"><a href="https://doc.qt.io/qt-6/qapplication.html"><span class="typ">QApplication</span></a></span><span class="pln"> app</span><span class="pun">(</span><span class="pln">argc</span><span class="operator"><span class="pun">,</span></span><span class="pln"> argv</span><span class="pun">);</span><span class="pln">
    </span><span class="typ">Window</span><span class="pln"> window</span><span class="pun">;</span><span class="pln">
    window</span><span class="operator"><span class="pun">.</span></span><span class="pln">setSourceModel</span><span class="pun">(</span><span class="pln">createMailModel</span><span class="pun">(</span><span class="operator"><span class="pun">&amp;</span></span><span class="pln">window</span><span class="pun">));</span><span class="pln">
    window</span><span class="operator"><span class="pun">.</span></span><span class="pln">show</span><span class="pun">();</span><span class="pln">
    </span><span class="keyword"><span class="kwd">return</span></span><span class="pln"> app</span><span class="operator"><span class="pun">.</span></span><span class="kwd">exec</span><span class="pun">();</span><span class="pln">
</span><span class="pun">}</span></pre></div>
<p>The <code>createMailModel()</code> function is a convenience function provided to simplify the constructor. All it does is to create and return a model describing a collection of emails. The model is an instance of the <a href="https://doc.qt.io/qt-6/qstandarditemmodel.html">QStandardItemModel</a> class, i.e., a generic model for storing custom data typically used as a repository for standard Qt data types. Each mail description is added to the model using <code>addMail()</code>, another convenience function. See <code>itemviews/customsortfiltermodel/main.cpp</code> for details.</p>
<p><a href="https://code.qt.io/cgit/qt/qtbase.git/tree/examples/widgets/itemviews/customsortfiltermodel?h=6.4">Example project @ code.qt.io</a></p>
</div>
<!-- @@@itemviews/customsortfiltermodel -->
</div>
<p class="copy-notice">
<acronym title="Copyright">©</acronym> 2023 The Qt Company Ltd.
   Documentation contributions included herein are the copyrights of
   their respective owners.     The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the Free Software Foundation.     Qt and respective logos are <a href="https://doc.qt.io/qt/trademarks.html">    trademarks</a> of The Qt Company Ltd. in Finland and/or other countries
   worldwide. All other trademarks are property of their respective owners. </p>

                    </div>
                </article>
                <aside class="b-sidebar__content__right">
                    <div class="h-wysiwyg-html" data-scheme="">
                                                <h6><strong>Contents</strong></h6>
                        <nav>
                            <ul class="c-tableofcontents js-c-tableofcontents" data-tableofcontents-id="wrapperid" data-margin-top="sm">
<li class="level1"><p><a href="https://doc.qt.io/qt-6/qtwidgets-itemviews-customsortfiltermodel-example.html#mysortfilterproxymodel-class-definition">MySortFilterProxyModel Class Definition</a></p></li>
<li class="level1"><p><a href="https://doc.qt.io/qt-6/qtwidgets-itemviews-customsortfiltermodel-example.html#mysortfilterproxymodel-class-implementation">MySortFilterProxyModel Class Implementation</a></p></li>
<li class="level1"><p><a href="https://doc.qt.io/qt-6/qtwidgets-itemviews-customsortfiltermodel-example.html#window-class-definition">Window Class Definition</a></p></li>
<li class="level1"><p><a href="https://doc.qt.io/qt-6/qtwidgets-itemviews-customsortfiltermodel-example.html#window-class-implementation">Window Class Implementation</a></p></li>
<li class="level1"><p><a href="https://doc.qt.io/qt-6/qtwidgets-itemviews-customsortfiltermodel-example.html#the-main-function">The Main() Function</a></p></li>
</ul>
                        </nav>
                                            </div>
                                    </aside>
            </div>
        </div>
    </div>
</div>
<div id="footer">
<footer class="b-footer">
  <div class="b-footer__container">
    <div class="b-footer__wrapper">
      <a class="b-footer__logo" href="https://doc.qt.io/?hsLang=en"></a>
      <div class="b-footer__social-icons">
        <a class="b-footer__social-icons__icon" href="https://www.facebook.com/qt/">
        <svg width="10px" height="16px" viewBox="0 0 10 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g id="Mainpage" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                            <g id="Mainpage_Layout_V4_Active" transform="translate(-149.000000, -7668.000000)" fill="#41CD52">
                                <g id="Footer" transform="translate(0.000000, 7558.000000)">
                                    <g id="social-16px_logo-fb-simple" transform="translate(149.000000, 110.000000)">
                                        <path d="M3.02293,16 L3,9 L0,9 L0,6 L3,6 L3,4 C3,1.3008 4.67151,0 7.07938,0 C8.23277,0 9.22406,0.08587 9.51294,0.12425 L9.51294,2.94507 L7.84296,2.94583 C6.53343,2.94583 6.27987,3.5681 6.27987,4.48124 L6.27987,6 L10,6 L9,9 L6.27986,9 L6.27986,16 L3.02293,16 Z" id="Shape"></path>
                                    </g>
                                </g>
                            </g>
                        </g>
                    </svg></a>
        <a class="b-footer__social-icons__icon" href="https://twitter.com/qtproject">
        <svg width="16px" height="14px" viewBox="0 0 16 14" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g id="Mainpage" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                            <g id="Mainpage_Layout_V4_Active" transform="translate(-193.000000, -7670.000000)" fill="#41CD52">
                                <g id="Footer" transform="translate(0.000000, 7558.000000)">
                                    <g id="social-16px_logo-twitter" transform="translate(193.000000, 112.000000)">
                                        <path d="M16,2 C15.4,2.3 14.8,2.4 14.1,2.5 C14.8,2.1 15.3,1.5 15.5,0.7 C14.9,1.1 14.2,1.3 13.4,1.5 C12.8,0.9 11.9,0.5 11,0.5 C9.3,0.5 7.8,2 7.8,3.8 C7.8,4.1 7.8,4.3 7.9,4.5 C5.2,4.4 2.7,3.1 1.1,1.1 C0.8,1.6 0.7,2.1 0.7,2.8 C0.7,3.9 1.3,4.9 2.2,5.5 C1.7,5.5 1.2,5.3 0.7,5.1 L0.7,5.1 C0.7,6.7 1.8,8 3.3,8.3 C3,8.4 2.7,8.4 2.4,8.4 C2.2,8.4 2,8.4 1.8,8.3 C2.2,9.6 3.4,10.6 4.9,10.6 C3.8,11.5 2.4,12 0.8,12 L0,12 C1.5,12.9 3.2,13.5 5,13.5 C11,13.5 14.3,8.5 14.3,4.2 L14.3,3.8 C15,3.3 15.6,2.7 16,2 Z" id="Shape"></path>
                                    </g>
                                </g>
                            </g>
                        </g>
                    </svg></a>
        <a class="b-footer__social-icons__icon" href="https://www.youtube.com/user/QtStudios">
        <svg width="16px" height="12px" viewBox="0 0 16 12" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g id="Mainpage" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                            <g id="Mainpage_Layout_V4_Active" transform="translate(-243.000000, -7671.000000)" fill="#41CD52">
                                <g id="Footer" transform="translate(0.000000, 7558.000000)">
                                    <g id="social-16px_logo-youtube" transform="translate(243.000000, 113.000000)">
                                        <path d="M15.8,2.8 C15.6,1.5 15,0.6 13.6,0.4 C11.4,0 8,0 8,0 C8,0 4.6,0 2.4,0.4 C1,0.6 0.3,1.5 0.2,2.8 C0,4.1 0,6 0,6 C0,6 0,7.9 0.2,9.2 C0.4,10.5 1,11.4 2.4,11.6 C4.6,12 8,12 8,12 C8,12 11.4,12 13.6,11.6 C15,11.3 15.6,10.5 15.8,9.2 C16,7.9 16,6 16,6 C16,6 16,4.1 15.8,2.8 Z M6,9 L6,3 L11,6 L6,9 Z" id="Shape"></path>
                                    </g>
                                </g>
                            </g>
                        </g>
                    </svg></a>
        <a class="b-footer__social-icons__icon" href="https://www.linkedin.com/company/theqtcompany/"><i aria-hidden="true" class="fa fa-linkedin-square"></i></a><br>
        <a class="c-button" href="https://www.qt.io/contact-us?hsLang=en" style="margin-top: 1em;"><span>Contact Us</span></a>
      </div>
      <div class="b-footer__nav">
        <div aria-label="Navigation Menu" class="hs-menu-wrapper" role="navigation">
          <ul role="menu">
            <li role="none">
              <a aria-expanded="false" aria-haspopup="true" href="javascript:;" role="menuitem">Company</a>
              <ul class="hs-menu-children-wrapper" role="menu">
                <li role="none"><a href="https://www.qt.io/company" role="menuitem">About Us</a></li>
                <li role="none"><a href="https://investors.qt.io/" role="menuitem">Investors</a></li>
                <li role="none"><a href="https://www.qt.io/newsroom" role="menuitem">Newsroom</a></li>
                <li role="none"><a href="https://www.qt.io/careers" role="menuitem">Careers</a></li>
                <li role="none"><a href="https://www.qt.io/contact-us/qt-offices" role="menuitem">Office Locations</a></li>
              </ul>
            </li>
            <li role="none">
              <a aria-expanded="false" aria-haspopup="true" href="javascript:;" role="menuitem">Licensing</a>
              <ul class="hs-menu-children-wrapper" role="menu">
                <li role="none"><a href="https://www.qt.io/terms-conditions/" role="menuitem">Terms &amp; Conditions</a></li>
                <li role="none"><a href="https://www.qt.io/licensing/open-source-lgpl-obligations" role="menuitem">Open Source</a></li>
                <li role="none"><a href="https://www.qt.io/faq/overview" role="menuitem">FAQ</a></li>
              </ul>
            </li>
            <li role="none">
              <a aria-expanded="false" aria-haspopup="true" href="javascript:;" role="menuitem">Support</a>
              <ul class="hs-menu-children-wrapper" role="menu">
                <li role="none"><a href="https://www.qt.io/qt-support/" role="menuitem">Support Services</a></li>
                <li role="none"><a href="https://www.qt.io/qt-consulting/" role="menuitem">Professional Services</a></li>
                <li role="none"><a href="https://www.qt.io/contact-us/partners" role="menuitem">Partners</a></li>
                <li role="none"><a href="https://www.qt.io/qt-training/" role="menuitem">Training</a></li>
              </ul>
            </li>
            <li role="none">
              <a aria-expanded="false" aria-haspopup="true" href="javascript:;" role="menuitem">For Customers</a>
              <ul class="hs-menu-children-wrapper" role="menu">
                <li role="none"><a href="https://account.qt.io/support" role="menuitem">Support Center</a></li>
                <li role="none"><a href="https://account.qt.io/downloads" role="menuitem">Downloads</a></li>
                <li role="none"><a href="https://login.qt.io/login" role="menuitem">Qt Login</a></li>
                <li role="none"><a href="https://www.qt.io/contact-us" role="menuitem">Contact Us</a></li>
                <li role="none"><a href="https://www.qt.io/customer-success" role="menuitem">Customer Success</a></li>
              </ul>
            </li>
            <li role="none">
              <a aria-expanded="false" aria-haspopup="true" href="javascript:;" role="menuitem">Community</a>
              <ul class="hs-menu-children-wrapper" role="menu">
                <li role="none"><a href="https://www.qt.io/community/contribute-to-qt" role="menuitem">Contribute to Qt</a></li>
                <li role="none"><a href="https://forum.qt.io/" role="menuitem">Forum</a></li>
                <li role="none"><a href="https://wiki.qt.io/Main" role="menuitem">Wiki</a></li>
                <li role="none"><a href="https://www.qt.io/download" role="menuitem">Downloads</a></li>
                <li role="none"><a href="https://marketplace.qt.io/" role="menuitem">Marketplace</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
      <ul class="b-footer__copyright">
        <li><a href="https://account.qt.io/login">Sign In</a></li>
        <li><a href="mailto:feedback@qt.io?Subject=Feedback%20about%20doc.qt.io%20site">Feedback</a></li>
        <li><a href="https://www.qt.io/about-us?hsLang=en">© 2023 The Qt Company</a></li>
      </ul>
    </div>
  </div>
</footer>
</div><script type="text/javascript" id="gtm-vimeo-tracking">(function(l,f,n){function q(){var a=r(v("iframe"),w);a.length&&x(function(){m(a,y)})}function w(a){return-1<a.src.indexOf("player.vimeo.com/video/")}function x(a){p(f.Vimeo)?z("https://player.vimeo.com/api/player.js",a):a()}function y(a){if(!a.__vimeoTracked){a.__vimeoTracked=!0;var d=new Vimeo.Player(a),b=n._track.percentages,c={Play:"play",Pause:"pause","Watch to End":"ended"},e={};d.getVideoTitle().then(function(h){m(["Play","Pause","Watch to End"],function(g){if(n.events[g])d.on(c[g],function(){t(g,
h)})});if(b)d.on("timeupdate",function(g){g=g.percent;for(var k in b)g>=b[k]&&!e[k]&&(e[k]=!0,t(k,h))})})}}function A(a){a=B({},{events:{Play:!0,Pause:!0,"Watch to End":!0},percentages:{each:[],every:[]}},a);m(["each","every"],function(c){var e=a.percentages[c];u(e)||(e=[e]);e&&(a.percentages[c]=C(e,Number))});var d=[].concat(a.percentages.each);a.percentages.every&&m(a.percentages.every,function(c){var e=100/c,h=[],g;for(g=1;g<e;g++)h.push(c*g);d=d.concat(r(h,function(k){return 0<k&&100>k}))});var b=
D(d,function(c,e){c[e+"%"]=e/100;return c},{});a._track={percentages:b};return a}function E(a){a=a||{};var d=a.name||"dataLayer",b=a.name||f.GoogleAnalyticsObject||"ga",c="_gaq",e={gtm:function(h,g){f.dataLayer.push({event:"vimeoTrack",vimeoTrack:{videoAction:h,videoName:g}})},cl:function(h,g){f[c].push(["_trackEvent","Videos",h,g])},ua:function(h,g){f[b]("send","event","Videos",h,g)}};switch(a.type){case "gtm":f[d]=f[d]||[];break;case "ua":f[b]=f[b]||function(){(f[b].q=f[b].q||[]).push(arguments)};
f[b].l=+new Date;break;case "cl":f[c]=f[c]||[];break;default:p(f[d])?b&&!p(f[b])?a.type="ua":p(f[c])||p(f[c].push)||(a.type="cl"):(a.type="gtm",f[d]=f[d]||[])}return e[a.type]}function B(){var a=[].slice.call(arguments),d=a.shift(),b,c;for(c=0;c<a.length;c++){var e=a[c];for(b in e)d[b]=e[b]}return d}function u(a){return Array.isArray_?Array.isArray_(a):"[object Array]"===Object.prototype.toString.call(a)}function m(a,d){if(Array.prototype.forEach_)return a.forEach.call(a,d);var b;for(b=0;b<a.length;b++)d.call(f,
a[b],b,a)}function C(a,d){if(Array.prototype.map_)return a.map.call(a,d);var b=[];m(a,function(c,e,h){b.push(d.call(f,c,e,h))});return b}function r(a,d){if(Array.prototype.filter)return a.filter.call(a,d);var b=[];m(a,function(c,e,h){d.call(f,c,e,h)&&b.push(c)});return b}function D(a,d,b){if(Array.prototype.reduce)return a.reduce.call(a,d,b);var c;for(c=0;c<a.length;c++){var e=a[c];b=d.call(f,b,e,a,c)}return b}function p(a){return"undefined"===typeof a}function v(a){u(a)||(a=[a]);return[].slice.call(l.querySelectorAll(a.join()))}
function z(a,d){function b(){d&&(d(),e.onload=null)}var c=l.getElementsByTagName("script")[0];var e=l.createElement("script");e.onload=b;e.src=a;e.async=!0;c.parentNode.insertBefore(e,c)}if(!navigator.userAgent.match(/MSIE [678]\./gi)){n=A(n);var t=E(n.syntax);"loading"!==l.readyState?q():l.addEventListener("DOMContentLoaded",q);l.addEventListener("load",q,!0)}})(document,window,{events:{Play:!0,Pause:!0,"Watch to End":!0},percentages:{every:25,each:[10,90]}});</script></body></html>